{"config":{"lang":["pt"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"ETL SIGOS","text":"<p>Base paralela (PostgreSQL/Supabase) com extra\u00e7\u00e3o automatizada via Selenium e execu\u00e7\u00e3o serverless na AWS.</p>"},{"location":"#por-que-isso-existe","title":"Por que isso existe?","text":"<p>O banco original do SIGOS fica em um servidor interno sem acesso direto para an\u00e1lise. Isso for\u00e7ava um processo manual: baixar CSVs, tratar na m\u00e3o e atualizar relat\u00f3rios continuamente.</p> <p>Este projeto cria uma base paralela sempre atualizada no Supabase (Postgres), permitindo que dashboards e relat\u00f3rios sejam constru\u00eddos sem depender de downloads manuais.</p>"},{"location":"#o-que-ele-faz","title":"O que ele faz","text":"<ul> <li>Incremental (recorrente): atualiza o banco com os dados recentes.</li> <li>Full (semanal): reprocessa tudo para capturar corre\u00e7\u00f5es e auditorias em registros antigos.</li> </ul>"},{"location":"#principais-datasets","title":"Principais datasets","text":"<ul> <li>general_reports: todos os servi\u00e7os protocolados (qualquer status).</li> <li>return_reports: servi\u00e7os que entraram em status de retorno (retrabalho/qualidade).</li> </ul>"},{"location":"#stack","title":"Stack","text":"<ul> <li>Python + Selenium (Chromium)</li> <li>Docker</li> <li>AWS ECS Fargate + EventBridge Scheduler</li> <li>Supabase (PostgreSQL)</li> </ul> <p>Dica</p> <p>Se voc\u00ea chegou aqui por portf\u00f3lio: o foco \u00e9 mostrar um pipeline completo (extract/transform/load) com automa\u00e7\u00e3o, logs e testes.</p>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#010","title":"0.1.0","text":"<ul> <li>Pipeline funcional (incremental e full)</li> <li>Execu\u00e7\u00e3o na AWS ECS Fargate</li> <li>Agendamento via EventBridge Scheduler</li> </ul>"},{"location":"aws/checklist/","title":"Checklist de recursos na AWS","text":""},{"location":"aws/checklist/#ecr","title":"ECR","text":"<ul> <li>Reposit\u00f3rio de imagem do container</li> </ul>"},{"location":"aws/checklist/#ecs","title":"ECS","text":"<ul> <li>Cluster</li> <li>Task Definition (Fargate / awsvpc)</li> <li>Logs (CloudWatch)</li> </ul>"},{"location":"aws/checklist/#eventbridge-scheduler","title":"EventBridge Scheduler","text":"<ul> <li>Schedule incremental</li> <li>Schedule full</li> </ul>"},{"location":"aws/checklist/#iam","title":"IAM","text":"<ul> <li>Role de execu\u00e7\u00e3o para o Scheduler (<code>scheduler.amazonaws.com</code>)</li> <li>Permiss\u00f5es para <code>ecs:RunTask</code> e <code>iam:PassRole</code></li> </ul>"},{"location":"aws/troubleshooting/","title":"Troubleshooting","text":""},{"location":"aws/troubleshooting/#erro-unable-to-convert-target-input-to-taskoverride","title":"Erro: <code>Unable to convert target input to TaskOverride</code>","text":"<p>Causa comum: o Scheduler exige que o <code>Input</code> seja uma string JSON escapada.</p> <p>Solu\u00e7\u00e3o: gerar o arquivo <code>target.json</code> com <code>Input</code> no formato:</p> <pre><code>\"Input\": \"{\\\"containerOverrides\\\":[{\\\"name\\\":\\\"etl-sigos\\\",\\\"command\\\":[\\\"python\\\",\\\"etl/main.py\\\",\\\"--cycle-incremental\\\"]}]}\"\n</code></pre>"},{"location":"aws/troubleshooting/#erro-the-execution-role-you-provide-must-allow-aws-eventbridge-scheduler-to-assume-the-role","title":"Erro: <code>The execution role you provide must allow AWS EventBridge Scheduler to assume the role</code>","text":"<p>Causa: Trust policy incorreta.</p> <p>Solu\u00e7\u00e3o: a role precisa permitir <code>scheduler.amazonaws.com</code>:</p> <pre><code>{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\"Service\": \"scheduler.amazonaws.com\"},\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n</code></pre>"},{"location":"aws/troubleshooting/#selenium-chrome","title":"Selenium / Chrome","text":"<ul> <li>Se travar no login, valide modo headless e vers\u00f5es do Chromium/driver.</li> <li>Confira logs da Task no CloudWatch.</li> </ul>"},{"location":"project/architecture/","title":"Arquitetura","text":""},{"location":"project/architecture/#visao-em-alto-nivel","title":"Vis\u00e3o em alto n\u00edvel","text":"<ol> <li>ECS Fargate executa um container Docker.</li> <li>O container roda o ETL e baixa relat\u00f3rios com Selenium (headless).</li> <li>Os dados s\u00e3o transformados e carregados no Supabase (Postgres).</li> <li>O EventBridge Scheduler dispara execu\u00e7\u00f5es incremental e full.</li> </ol>"},{"location":"project/architecture/#componentes","title":"Componentes","text":"<ul> <li>Selenium + Chromium: autentica e baixa relat\u00f3rios</li> <li>Transforma\u00e7\u00e3o (Pandas): limpeza, tipos, datas, padroniza\u00e7\u00e3o</li> <li>Loader: conex\u00e3o Postgres e upsert/replace conforme modo</li> </ul>"},{"location":"project/architecture/#execucao-serverless","title":"Execu\u00e7\u00e3o serverless","text":"<ul> <li>Container no ECR</li> <li>Task no ECS</li> <li>Agendamento no Scheduler</li> </ul> <p>Note</p> <p>A execu\u00e7\u00e3o \u00e9 event-driven e paga por uso: n\u00e3o h\u00e1 servidor para administrar.</p>"},{"location":"project/data/","title":"Dados (general vs return)","text":""},{"location":"project/data/#general_reports","title":"general_reports","text":"<p>Base de todos os servi\u00e7os protocolados no SIGOS.</p> <p>Uso:</p> <ul> <li>acompanhamento operacional</li> <li>produtividade e execu\u00e7\u00e3o</li> <li>volume por regional/equipe</li> </ul>"},{"location":"project/data/#return_reports","title":"return_reports","text":"<p>Base de servi\u00e7os em status retorno.</p> <p>Uso:</p> <ul> <li>qualidade do processo em campo</li> <li>retrabalho</li> <li>auditorias e corre\u00e7\u00f5es</li> </ul> <p>Tip</p> <p>Separar as bases ajuda a criar dashboards com foco (opera\u00e7\u00e3o vs qualidade).</p>"},{"location":"project/overview/","title":"Vis\u00e3o geral","text":"<p>Este projeto automatiza a coleta de relat\u00f3rios do SIGOS e mant\u00e9m uma base paralela em Postgres (Supabase).</p>"},{"location":"project/overview/#problema","title":"Problema","text":"<ul> <li>SIGOS fora do ecossistema de analytics (Snowflake).</li> <li>Rotina manual de download/limpeza/consolida\u00e7\u00e3o.</li> </ul>"},{"location":"project/overview/#solucao","title":"Solu\u00e7\u00e3o","text":"<p>Criar uma base paralela atualizada com duas estrat\u00e9gias:</p> <ul> <li>Incremental: recortes recentes (alta frequ\u00eancia).</li> <li>Full: reprocessamento completo (semanal) para capturar altera\u00e7\u00f5es retroativas.</li> </ul>"},{"location":"project/overview/#resultados-esperados","title":"Resultados esperados","text":"<ul> <li>Menos retrabalho</li> <li>Menos risco de erro</li> <li>Maior velocidade para criar e manter dashboards</li> </ul>"},{"location":"project/scheduling/","title":"Agendamentos (incremental / full)","text":""},{"location":"project/scheduling/#por-que-dois-modos","title":"Por que dois modos?","text":"<p>Durante a semana podem ocorrer corre\u00e7\u00f5es em dados antigos (auditorias). Um incremental curto n\u00e3o capturaria isso.</p> <ul> <li>Incremental: deixa a base atualizada para relat\u00f3rios do dia a dia.</li> <li>Full: garante consist\u00eancia semanal.</li> </ul>"},{"location":"project/scheduling/#como-funciona-na-aws","title":"Como funciona na AWS","text":"<p>Os agendamentos s\u00e3o configurados no EventBridge Scheduler, que dispara uma Task no ECS com override de comando:</p> <ul> <li>incremental: <code>python etl/main.py --cycle-incremental</code></li> <li>full: <code>python etl/main.py --cycle-full</code></li> </ul>"},{"location":"run/local/","title":"Rodar localmente (dev/debug)","text":"<p>Mesmo que o SIGOS exija credenciais internas, rodar localmente \u00e9 \u00fatil para desenvolvimento e debugging.</p>"},{"location":"run/local/#passos","title":"Passos","text":"<ol> <li>Instalar depend\u00eancias</li> </ol> <pre><code>poetry install\n</code></pre> <ol> <li> <p>Configurar <code>.env</code></p> </li> <li> <p>Executar</p> </li> </ol> <pre><code>task cycle_inc\ntask cycle_full\n</code></pre> <p>Warning</p> <p>N\u00e3o versione o <code>.env</code>.</p>"},{"location":"run/tests/","title":"Testes","text":"<p>O reposit\u00f3rio possui testes para validar partes importantes do pipeline.</p> <pre><code>task test\n</code></pre> <p>Sugest\u00e3o: rodar testes antes de publicar uma nova imagem no ECR.</p>"}]}